# The file name of a config YAML must be [dataset title].yml, where the title
# can be retrieved from the geometamaker metadata YAMl `title` attribute

# Default policy if no rule matches
defaults:
  allow: true # whether to allow files to be downloadable by default
  # Note: folders are _not_ downloadable by default (assumes no zipfile created)

# Rule list evaluated top-to-bottom; first match wins; path_globs evaluated first

# Note: `path_glob` patterns are compared to a file's download url (if it exists),
# or the file basename if no url (e.g., folders don't have a url) via:
    # fnmatch.fnmatch(filename or URL, path_glob)
# whereas `name_regex` patterns are compared to file basename via:
    # re.search(name_regex, filename)

rules:
  # Allow a folder to be downloadable (via .zip)
  - match:
      path_glob: "my_dir"
    allow: true
    reason: "Allow my_dir to be downloaded"
    # Note: in order for `my_dir` to be downloadable,
    # `my_dir.zip` must exist in same location as `my_dir`

  # Prevent files _within_ `my_dir` from being downloadable
  - match:
      path_glob: "*/my_dir/*"
    allow: false
    reason: "Don't allow files in my_folder to be downloaded"

  # Block any `.csv` in the folder `output_dir` that contains `2025`
  - match:
      name_regex: r"(^|[\\/])output_dir[\\/].*2025.*\.csv$"
    allow: false
    reason: "Monthly ET files are not downloadable"

  # Prevent any file with a `.tif` extensions from download 
  - match:
      ext_any: [".tif"]
    allow: false
    reason: "prevent GeoTIFFs from being downloadable"

      
